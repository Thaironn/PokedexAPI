<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <title>Pokémon API</title>
  <link rel="stylesheet" href="poke.css">
</head>

<body>

  <div id="container">
    <h1>Pokédex</h1>
    <a href="pc.html">
      <button>
        <img src="https://static.wikia.nocookie.net/tkoc/images/8/87/Pok%C3%A9_Ball.png/revision/latest?cb=20200626174824&path-prefix=pt-br" style="width: 50px; height: 50px;" alt="Descrição da imagem">
      </button>
    </a>
  </div>

  <div class="pokeContainer" id="pokeContainer">

  </div>

  <script>
    document.addEventListener('DOMContentLoaded', async () => {
        const pokeContainer = document.querySelector("#pokeContainer"); // Corrigido para pokeContainer
        const pokemonCount = 20;
        const colors = {
            fire: '#FF0000', //Arrumar o tons das cores
            grass: '#DEFDE0',
            electric: '#FCF7DE',
            water: '#DEF3FD',
            ground: '#f4e7da',
            rock: '#d5d5d4',
            fairy: '#fceaff',
            poison: '#98d7a5',
            bug: '#f8d5a3',
            dragon: '#97b3e6',
            psychic: '#eaeda1',
            flying: '#F5F5F5',
            fighting: '#E6E0D4',
            normal: '#F5F5F5'
        };

        const fetchPokemons = async () => {
            for (let i = 1; i < pokemonCount; i++) {
                await getPokemons(i);
            }
        };

        const getPokemons = async (id) => {          
            const url = `https://pokeapi.co/api/v2/pokemon/${id}`;
            const resp = await fetch(url);
            const data = await resp.json();
            pokemonCard(data);
        };

        const pokemonCard = (poke) => {
        const card = document.createElement('div');
        card.classList.add("pokemon");

        const name = poke.name[0].toUpperCase() + poke.name.slice(1);
        const id = poke.id.toString().padStart(3, '0');

        const pokemonTypes = poke.types.map(type => type.type.name);
        const color = getBackgroundColor(pokemonTypes);

        card.style.backgroundColor = color;

        const typesHTML = pokemonTypes.map(type => {
        const typeClass = getTypeClass(type);
        return `<span class="type ${typeClass}">${type}</span>`;
    }).join(' ');

        const pokemonInnerHTML = `

          <div class="vercomprar">

            <a href="info.html">
              <button>Ver</button>
            </a>

          </div>    

          <div class="imgContainer">
              <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${poke.id}.png" alt="${name}">
          </div>
          
          <div class="info">
              <span class="number">#${id}</span>
              <h3 class="name">${name}</h3>
              <small class="types">${typesHTML}</small>
          </div>
        `;
    card.innerHTML = pokemonInnerHTML;

    if (pokeContainer) {
        pokeContainer.appendChild(card);
    } else {
        console.error("Elemento com ID 'pokeContainer' não encontrado.");
    }
};

function getTypeClass(type) {
    const lowercaseType = type.toLowerCase();
    
    // Mapeia o tipo para a classe correspondente
    const typeClassMap = {
        normal: 'normal-type',
        fire: 'fire-type',
        water: 'water-type',
        grass: 'grass-type',
        flying: 'flying-type',
        fighting: 'fighting-type',
        poison: 'poison-type',
        electric: 'electric-type',
        ground: 'ground-type',
        rock: 'rock-type',
        psychic: 'psychic-type',
        ice: 'ice-type',
        bug: 'bug-type',
        ghost: 'ghost-type',
        steel: 'steel-type',
        dragon: 'dragon-type',
        dark: 'dark-type',
        fairy: 'fairy-type'
        // Adicione mais tipos conforme necessário
    };

    return typeClassMap[lowercaseType] || '';
}

function getBackgroundColor(types) {
    // pega a cor do primeiro tipo
    return colors[types[0]] || colors.normal;
}


        fetchPokemons();
    });
  </script>

</body>

</html>
